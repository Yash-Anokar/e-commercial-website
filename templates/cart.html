{% extends "base.html" %}

{% block title %}Shopping Cart - VAPU{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>Shopping Cart</h2>
    </div>

    {% if items %}
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Subtotal</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>
                            <a href="{{ url_for('product_detail', product_id=item[4]) }}" style="color: var(--primary); text-decoration: none; font-weight: 600;">
                                {{ item[1] }}
                            </a>
                        </td>
                        <td class="price" style="font-size: 1rem;">â‚¹{{ "%.2f"|format(item[2]) }}</td>
                        <td>{{ item[3] }}</td>
                        <td class="price" style="font-size: 1rem;">â‚¹{{ "%.2f"|format(item[2] * item[3]) }}</td>
                        <td>
                            <a href="{{ url_for('remove_from_cart', cart_id=item[0]) }}" class="btn btn-danger btn-sm" onclick="return confirm('Remove this item from cart?')">
                                Remove
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; padding: 1.5rem; background: var(--secondary); border-radius: 12px;">
            <div>
                <h3 style="font-size: 1.5rem; color: var(--text);">Total: <span class="price" style="font-size: 1.8rem;">â‚¹{{ "%.2f"|format(total) }}</span></h3>
            </div>
            <div style="display: flex; gap: 1rem;">
                <a href="{{ url_for('home') }}" class="btn btn-secondary">Continue Shopping</a>
                <a href="{{ url_for('checkout') }}" class="btn btn-success" style="font-size: 1.1rem; padding: 1rem 2rem;">
                    Proceed to Checkout
                </a>
            </div>
        </div>
    {% else %}
        <div class="text-center" style="padding: 3rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">ðŸ›’</div>
            <h3 style="margin-bottom: 1rem;">Your cart is empty</h3>
            <p style="color: var(--text-light); margin-bottom: 2rem;">Start shopping to add items to your cart!</p>
            <a href="{{ url_for('home') }}" class="btn">Start Shopping</a>
        </div>
    {% endif %}
</div>
{% endblock %}